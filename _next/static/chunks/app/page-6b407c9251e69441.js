(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5519:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>B});var r=s(5155),i=s(2115);function a(e){let{userCount:t,facilitatorCount:s,currentRoom:i}=e;return(0,r.jsx)("header",{className:"sticky top-0 z-20 border-b border-border bg-card/80 backdrop-blur",children:(0,r.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-col gap-4 px-6 py-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-primary to-primary-light text-2xl font-semibold text-primary-foreground",children:"SS"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-foreground",children:"SilentSpeak"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Safe, anonymous peer support with facilitator oversight"})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-5 text-sm font-medium text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,r.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-secondary opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-secondary"})]}),"System active"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-semibold text-foreground",children:t}),"Active users"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-semibold text-foreground",children:s}),"Facilitators online"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 rounded-full bg-primary/10 px-3 py-1 text-primary border border-primary/20",children:[(0,r.jsx)("span",{className:"text-xs uppercase tracking-wide text-primary/70",children:"Room"}),(0,r.jsx)("span",{className:"font-semibold",children:i?i.name:"Select a room"})]})]})]})})}function o(e){let{activeTab:t,onChange:s}=e;return(0,r.jsxs)("div",{className:"flex w-full max-w-6xl rounded-3xl bg-card/80 p-1 shadow-lg shadow-primary/10",role:"tablist",children:[(0,r.jsx)("button",{type:"button",role:"tab","aria-selected":"participant"===t,"aria-controls":"participant-panel",className:"flex-1 rounded-3xl px-6 py-3 text-sm font-semibold transition ".concat("participant"===t?"bg-primary text-primary-foreground shadow-lg shadow-primary/40":"text-muted-foreground hover:bg-primary/10 hover:text-primary"),onClick:()=>s("participant"),children:"Share your thoughts"}),(0,r.jsx)("button",{type:"button",role:"tab","aria-selected":"facilitator"===t,"aria-controls":"facilitator-panel",className:"flex-1 rounded-3xl px-6 py-3 text-sm font-semibold transition ".concat("facilitator"===t?"bg-primary text-primary-foreground shadow-lg shadow-primary/40":"text-muted-foreground hover:bg-primary/10 hover:text-primary"),onClick:()=>s("facilitator"),children:"Facilitator dashboard"})]})}let n=JSON.parse('{"ui":{"messageCharacterLimit":500,"toastDurations":{"success":3200,"error":4000,"info":3200},"systemStatus":{"defaultUserCount":11,"defaultFacilitatorCount":3,"userCountFluctuationInterval":30000}},"vp":[{"id":"anxiety","label":"Anxiety","icon":"\uD83D\uDE30"},{"id":"school","label":"School","icon":"\uD83D\uDCDA"},{"id":"family","label":"Family","icon":"\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67"},{"id":"friends","label":"Friends","icon":"\uD83D\uDC65"},{"id":"mood","label":"Mood","icon":"\uD83C\uDF08"},{"id":"stress","label":"Stress","icon":"\uD83D\uDE13"},{"id":"lonely","label":"Loneliness","icon":"\uD83C\uDF19"},{"id":"gratitude","label":"Gratitude","icon":"\uD83D\uDC9A"},{"id":"other","label":"Other","icon":"\uD83D\uDCAD"}],"ES":[{"id":"crisis","title":"Crisis Helpline","description":"24/7 confidential support","icon":"\uD83D\uDCDE","link":"tel:988"},{"id":"breathing","title":"Breathing Exercise","description":"Quick calming technique","icon":"\uD83E\uDEC1","link":null},{"id":"grounding","title":"Grounding Techniques","description":"Stay present and centered","icon":"\uD83E\uDDD8"},{"id":"chat","title":"Live Chat Support","description":"Connect with a facilitator","icon":"\uD83D\uDCAC"}],"ek":{"highRiskTerms":["suicide","kill myself","end it","die","overdose","self-harm","cutting","not safe","hurt myself"],"mediumRiskTerms":["panic","anxious","scared","depressed","can\'t cope","hate myself","worthless","crying","alone"]},"MK":{"adjectives":["Gentle","Brave","Thoughtful","Caring","Strong","Wise","Kind","Peaceful","Hopeful","Resilient"],"nouns":["Butterfly","Phoenix","Mountain","Ocean","Star","Garden","Rainbow","Sunrise","Moonlight","River"]},"LK":[{"label":"Today","rooms":[{"id":"today-grounding","name":"Grounding Circle","time":"2:00 PM","focus":"Breathing and mindfulness","availability":"3 spots left"},{"id":"today-reflection","name":"Evening Reflections","time":"7:00 PM","focus":"Gratitude check-in","availability":"Open seating"}]},{"label":"Tomorrow","rooms":[{"id":"tomorrow-resilience","name":"Resilience Builder","time":"10:00 AM","focus":"Coping skills lab","availability":"2 facilitators on call"},{"id":"tomorrow-story-share","name":"Story Share","time":"4:00 PM","focus":"Wins and challenges","availability":"Limited to 12 participants"}]},{"label":"Later This Week","rooms":[{"id":"weekend-grounding","name":"Weekend Grounding","time":"Saturday 11:00 AM","focus":"Mindful breathing sequence","availability":"5 spots left"},{"id":"weekend-reset","name":"Sunday Reset","time":"Sunday 5:00 PM","focus":"Intention setting for the week","availability":"Waitlist available"}]}],"yv":[{"text":"I\'m feeling really anxious about my exams coming up.","author":"Quiet Willow #17","minutesAgo":32,"topic":"school","urgent":false,"queued":false,"reviewed":true,"approved":true},{"text":"Today was actually a good day. I went for a walk and felt peaceful.","author":"Bright River #744","minutesAgo":58,"topic":"mood","urgent":false,"queued":false,"reviewed":true,"approved":true},{"text":"Sometimes I feel like nobody understands what I\'m going through.","author":"Caring Star #203","minutesAgo":85,"topic":"lonely","urgent":false,"queued":true,"reviewed":false,"approved":false},{"text":"Thank you to whoever posted about breathing exercises. It really helped!","author":"Gentle Garden #521","minutesAgo":120,"topic":"gratitude","urgent":false,"queued":false,"reviewed":true,"approved":true},{"text":"My family doesn\'t get why I need space sometimes.","author":"Hopeful Sunrise #89","minutesAgo":160,"topic":"family","urgent":false,"queued":true,"reviewed":false,"approved":false}],"P$":{"participant":{"welcomeTitle":"Welcome to your safe space","welcomeDescription":"Share what is on your mind anonymously. Facilitators keep an eye on things to make sure everyone stays safe and supported.","messagePromptTitle":"What is on your mind today?","messagePromptDescription":"Select a topic to help facilitators triage quicker (optional).","messagePlaceholder":"Type your message here... Remember, you\'re not alone in this.","urgentLabel":"I need urgent support","requestFacilitatorLabel":"Request facilitator attention","sendButton":"Send anonymously","communityMessagesTitle":"Community messages","communityMessagesDescription":"You are not alone—others are sharing too.","resourcesTitle":"Supportive resources"},"facilitator":{"statsTitle":"Triage snapshot","queueTitle":"Priority queue","queueDescription":"High-risk or facilitator flagged messages waiting for review.","queueEmptyMessage":"The queue is clear. Great job staying on top of things!","feedTitle":"Live message feed","feedDescription":"Filter by risk level to focus your review.","approveButton":"Approve for feed","markReviewedButton":"Mark as reviewed","removeFromQueueButton":"Remove from queue","statLabels":{"totalMessages":"Total messages","inQueue":"In queue","highPriority":"High priority","reviewedToday":"Reviewed today"}},"toasts":{"messageSent":"Your message has been sent anonymously","facilitatorNotified":"A facilitator has been notified and will respond soon","messageApproved":"Message approved for the participant feed","messageReviewed":"Message marked as reviewed","messageRemoved":"Message removed from queue","credentialsError":"Enter both a username and password to continue","loginSuccess":"Logged in as {username}","signupSuccess":"Signed up as {username}","termsAccepted":"Thanks for accepting our community guidelines","termsRejected":"You can return when you are ready to agree to the guidelines.","profileSelected":"{profile} profile selected","profileRequired":"Select a profile option to continue","roomJoined":"You joined {roomName}"}}}'),{MK:l,ek:d}=n;function c(){let e=l.adjectives[Math.floor(Math.random()*l.adjectives.length)],t=l.nouns[Math.floor(Math.random()*l.nouns.length)],s=Math.floor(999*Math.random())+1;return"".concat(e," ").concat(t," #").concat(s)}function u(e){if(!e||"string"!=typeof e)return"low";let t=e.toLowerCase();return d.highRiskTerms.some(e=>t.includes(e))?"high":d.mediumRiskTerms.some(e=>t.includes(e))?"medium":"low"}function m(e){let t=Math.floor((Date.now()-e.getTime())/1e3);return t<60?"just now":t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):e.toLocaleDateString(void 0,{month:"short",day:"numeric"})}let p={high:"bg-destructive/10 text-destructive border-destructive/20",medium:"bg-accent/10 text-accent border-accent/20",low:"bg-secondary/10 text-secondary border-secondary/20"};function h(e){let{risk:t,className:s=""}=e;return(0,r.jsxs)("span",{className:"rounded-full border px-3 py-1 text-xs font-semibold uppercase tracking-wide ".concat(p[t]," ").concat(s),role:"status","aria-label":"".concat(t," risk level"),children:[t," risk"]})}let g={primary:"bg-primary text-primary-foreground shadow-lg shadow-primary/30 hover:bg-primary-light transition-all",secondary:"bg-secondary text-secondary-foreground shadow-lg shadow-secondary/30 hover:opacity-90 transition-all",outline:"border-2 border-primary text-primary bg-transparent hover:bg-primary/10 transition-all",ghost:"text-slate-600 hover:bg-muted hover:text-foreground transition-all",destructive:"bg-destructive text-destructive-foreground shadow-lg shadow-destructive/30 hover:opacity-90 transition-all"},f={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},x=(0,i.forwardRef)((e,t)=>{let{variant:s="primary",size:i="md",className:a="",children:o,disabled:n,...l}=e;return(0,r.jsx)("button",{ref:t,className:"rounded-xl font-semibold inline-flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none ".concat(g[s]," ").concat(f[i]," ").concat(a),disabled:n,...l,children:o})});function y(e){let{prompts:t,title:s="Take a moment to reflect",description:a,onDismiss:o,dismissible:n=!0,className:l=""}=e,[d,c]=(0,i.useState)(!1);return d||0===t.length?null:(0,r.jsxs)("div",{className:"rounded-2xl border border-primary/20 bg-primary/5 p-5 shadow-sm ".concat(l),role:"complementary","aria-label":"Reflection prompts",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xl","aria-hidden":"true",children:"\uD83D\uDCAD"}),(0,r.jsx)("h3",{className:"text-base font-semibold text-primary",children:s})]}),a&&(0,r.jsx)("p",{className:"mt-1 text-sm text-primary/80",children:a})]}),n&&(0,r.jsx)("button",{type:"button",onClick:()=>{c(!0),o&&o()},className:"rounded-lg p-1 text-primary/60 transition hover:bg-primary/10 hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/30","aria-label":"Dismiss reflection prompts",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,r.jsx)("ul",{className:"mt-4 space-y-3",children:t.map(e=>(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"mt-0.5 text-primary/60","aria-hidden":"true",children:"•"}),(0,r.jsx)("span",{className:"flex-1 text-sm leading-relaxed text-primary",children:e.question})]},e.id))}),(0,r.jsx)("div",{className:"mt-4 text-xs text-primary/60",children:"These questions are designed to help you explore your thoughts. There are no right or wrong answers."})]})}x.displayName="Button";let b={relationships:"friendship","work-school":"work","self-care":"self","loss-grief":"spirituality","anxiety-stress":"general",general:"general"},w=[{id:"work-exploration-1",lifeTask:"work",category:"exploration",question:"How satisfied are you with your current work or sense of purpose?",description:"Explores fulfillment in work/occupation life task"},{id:"work-exploration-2",lifeTask:"work",category:"exploration",question:"What would make your work feel more meaningful?",description:"Investigates alignment between work and values"},{id:"work-encouragement-1",lifeTask:"work",category:"encouragement",question:"What skills and qualities do you bring to your work?",description:"Identifies existing strengths in work domain"},{id:"work-encouragement-2",lifeTask:"work",category:"encouragement",question:"When have you successfully navigated work challenges before?",description:"Recalls past resilience and coping"},{id:"work-reframing-1",lifeTask:"work",category:"reframing",question:"How might this challenge help you grow professionally?",description:"Reframes difficulty as opportunity"},{id:"work-reframing-2",lifeTask:"work",category:"reframing",question:"What would you tell a colleague facing this situation?",description:"Encourages self-compassion through perspective-taking"},{id:"friendship-exploration-1",lifeTask:"friendship",category:"exploration",question:"How would you describe the quality of your friendships?",description:"Assesses satisfaction with social connections"},{id:"friendship-exploration-2",lifeTask:"friendship",category:"exploration",question:"What prevents you from deepening your social connections?",description:"Identifies barriers to social interest development"},{id:"friendship-encouragement-1",lifeTask:"friendship",category:"encouragement",question:"What qualities make you a good friend?",description:"Recognizes relational strengths"},{id:"friendship-encouragement-2",lifeTask:"friendship",category:"encouragement",question:"Who in your life values your presence?",description:"Acknowledges existing connections and belonging"},{id:"friendship-reframing-1",lifeTask:"friendship",category:"reframing",question:"What small gesture could strengthen a relationship this week?",description:"Focuses on achievable action"},{id:"friendship-social-interest-1",lifeTask:"friendship",category:"social-interest",question:"How might reaching out benefit both you and someone else?",description:"Develops mutual benefit perspective"},{id:"love-exploration-1",lifeTask:"love",category:"exploration",question:"Are you open to giving and receiving love?",description:"Explores intimacy readiness"},{id:"love-exploration-2",lifeTask:"love",category:"exploration",question:"What patterns do you notice in your intimate relationships?",description:"Identifies relationship lifestyle patterns"},{id:"love-encouragement-1",lifeTask:"love",category:"encouragement",question:"What do you value most in intimate relationships?",description:"Clarifies personal values"},{id:"love-reframing-1",lifeTask:"love",category:"reframing",question:"How might past experiences be influencing your current relationships?",description:"Connects early experiences to present patterns"},{id:"love-reframing-2",lifeTask:"love",category:"reframing",question:"What's one way you can honor your needs while staying open to connection?",description:"Balances self-care with relational openness"},{id:"self-exploration-1",lifeTask:"self",category:"exploration",question:"How do you speak to yourself when you make a mistake?",description:"Assesses self-talk patterns"},{id:"self-exploration-2",lifeTask:"self",category:"exploration",question:"What does self-care look like for you?",description:"Explores self-relationship and needs"},{id:"self-encouragement-1",lifeTask:"self",category:"encouragement",question:"What are three things you appreciate about yourself?",description:"Builds self-acceptance"},{id:"self-encouragement-2",lifeTask:"self",category:"encouragement",question:"What strengths have gotten you through difficult times?",description:"Identifies resilience resources"},{id:"self-reframing-1",lifeTask:"self",category:"reframing",question:"What would you tell a friend who spoke to themselves the way you do?",description:"Classic Adlerian self-compassion reframe"},{id:"self-reframing-2",lifeTask:"self",category:"reframing",question:"What's one way you can practice self-compassion today?",description:"Actionable self-care step"},{id:"spirituality-exploration-1",lifeTask:"spirituality",category:"exploration",question:"What gives your life meaning and purpose?",description:"Explores existential life task"},{id:"spirituality-exploration-2",lifeTask:"spirituality",category:"exploration",question:"How do you find peace or connection to something larger than yourself?",description:"Investigates sources of meaning"},{id:"spirituality-encouragement-1",lifeTask:"spirituality",category:"encouragement",question:"What moments make you feel most alive?",description:"Identifies meaning-rich experiences"},{id:"spirituality-reframing-1",lifeTask:"spirituality",category:"reframing",question:"How might this challenge be an opportunity for growth?",description:"Reframes suffering as potential catalyst"},{id:"spirituality-reframing-2",lifeTask:"spirituality",category:"reframing",question:"How can you align your daily actions with your deepest values?",description:"Connects values to behavior"},{id:"general-encouragement-1",lifeTask:"general",category:"encouragement",question:"What strengths have helped you cope so far?",description:"Universal strengths-based prompt"},{id:"general-encouragement-2",lifeTask:"general",category:"encouragement",question:"What resources do you already have that you might be overlooking?",description:"Identifies overlooked assets"},{id:"general-encouragement-3",lifeTask:"general",category:"encouragement",question:"When have you successfully overcome difficulty before?",description:"Recalls past mastery experiences"},{id:"general-goal-1",lifeTask:"general",category:"goal-setting",question:"How would you like things to be different in 6 months?",description:"Classic Adlerian goal-setting question"},{id:"general-goal-2",lifeTask:"general",category:"goal-setting",question:"What's one small step you could take today?",description:"Focuses on achievable action"},{id:"general-goal-3",lifeTask:"general",category:"goal-setting",question:"What needs to happen for you to feel you're moving forward?",description:"Clarifies progress indicators"},{id:"general-social-interest-1",lifeTask:"general",category:"social-interest",question:"How might sharing your experience help others?",description:"Develops social interest through contribution"},{id:"general-social-interest-2",lifeTask:"general",category:"social-interest",question:"Who in your life could benefit from your support?",description:"Shifts from recipient to contributor mindset"},{id:"general-reframing-1",lifeTask:"general",category:"reframing",question:"What would you tell a friend in this situation?",description:"Universal self-compassion reframe"},{id:"general-reframing-2",lifeTask:"general",category:"reframing",question:"How might you treat yourself with more kindness?",description:"Invites self-compassion"},{id:"safety-1",lifeTask:"general",category:"safety",question:"What keeps you going during the most difficult moments?",description:"Identifies protective factors",riskLevel:"high"},{id:"safety-2",lifeTask:"general",category:"safety",question:"Who can you reach out to when you're struggling?",description:"Assesses social support",riskLevel:"high"},{id:"safety-3",lifeTask:"general",category:"safety",question:"What's one small thing that might help you feel safer right now?",description:"Focuses on immediate coping",riskLevel:"high"},{id:"safety-4",lifeTask:"general",category:"safety",question:"What has helped you get through hard times before, even briefly?",description:"Recalls coping strategies",riskLevel:"medium"},{id:"safety-5",lifeTask:"general",category:"safety",question:"What part of this situation is within your control?",description:"Focuses on agency",riskLevel:"medium"}],v={"inferiority-work":{theme:"Feelings of inadequacy in work/achievement domain",focus:"Normalize inferiority feelings, identify strengths, reframe challenge as growth opportunity",suggestedApproach:["Acknowledge feelings without judgment","Many people feel overwhelmed when facing challenges at work","What skills have helped you navigate difficulties before?","What small step could help you feel more capable?"],encouragementTemplate:"It sounds like you're feeling [emotion] about [situation]. Many people experience this when [context]. What strengths have helped you cope so far?"},"isolation-friendship":{theme:"Social disconnection and loneliness",focus:"Build social interest, normalize isolation feelings, identify small connection opportunities",suggestedApproach:["Feeling disconnected is difficult and very common","Connection often starts with small, brave steps","What qualities do you bring to friendships?","Who might benefit from hearing from you?"],encouragementTemplate:"Feeling alone can be really hard. Many people struggle with connection, especially during [context]. What small gesture could you make toward someone this week?"},"self-criticism":{theme:"Harsh self-judgment and low self-worth",focus:"Challenge basic mistakes, build self-compassion, reframe through friend perspective",suggestedApproach:["Notice how hard you're being on yourself","What would you tell a friend who felt this way?","Your worth isn't determined by [achievement/approval/etc.]","What's one way you can treat yourself with kindness today?"],encouragementTemplate:"I hear you being very hard on yourself. If a friend spoke to themselves this way, what would you tell them?"},"meaning-crisis":{theme:"Loss of purpose or existential distress",focus:"Explore spirituality life task, identify values, connect to larger meaning",suggestedApproach:["Questions about meaning are important and deeply human","What has given you a sense of purpose in the past?","What values feel most important to you?","How might you take one small action aligned with those values?"],encouragementTemplate:"Grappling with purpose and meaning takes courage. What matters most to you, even in small moments?"},"relationship-strain":{theme:"Conflict or difficulty in intimate relationships",focus:"Explore love life task, identify patterns, balance needs with connection",suggestedApproach:["Relationships can be challenging and rewarding","What patterns do you notice in your relationships?","How might past experiences be influencing the present?","What do you need to feel both safe and connected?"],encouragementTemplate:"Navigating relationships takes self-awareness and courage. What do you hope for in this relationship?"},"overwhelm-general":{theme:"General stress and feeling overwhelmed",focus:"Break down into manageable steps, identify coping strengths, focus on agency",suggestedApproach:["Feeling overwhelmed is a sign you're carrying a lot right now","What has helped you cope during stressful times before?","What's one small thing within your control?","How can you be gentle with yourself today?"],encouragementTemplate:"It makes sense that you're feeling overwhelmed. What's one tiny step that feels possible right now?"},"high-risk":{theme:"High-risk content indicating potential crisis",focus:"Immediate safety, social support assessment, connection to resources",suggestedApproach:["Thank you for sharing something so difficult","You don't have to go through this alone","Who can you reach out to for support right now?","Crisis resources: 988 Suicide & Crisis Lifeline (US)"],encouragementTemplate:"I'm concerned about your safety. Please reach out to 988 or your local crisis line. You deserve support right now."}};function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,s=arguments.length>2?arguments[2]:void 0,r=b[e]||"general",i=w.filter(e=>e.lifeTask===r||"general"===e.lifeTask);s&&(i=i.filter(e=>e.category===s));let a=[...i].sort(()=>Math.random()-.5);return a.slice(0,Math.min(t,a.length))}let{vp:k,ES:N,ui:T,P$:C}=n;function S(e){let{messages:t,selectedTopic:s,onSelectTopic:a,onSendMessage:o,room:n}=e,[l,d]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!1),[f,b]=(0,i.useState)(!0),[w,v]=(0,i.useState)(!1),[S,q]=(0,i.useState)(null),W=(0,i.useMemo)(()=>[...t].sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()),[t]),M=T.messageCharacterLimit,R=l.length>.9*M,A=(0,i.useMemo)(()=>s&&f?j(s,2,"encouragement").map(e=>({id:e.id,question:e.question,category:e.category,lifeTask:e.lifeTask})):[],[s,f]),D=(0,i.useMemo)(()=>w&&S?j(S,2,"goal-setting").map(e=>({id:e.id,question:e.question,category:e.category,lifeTask:e.lifeTask})):[],[w,S]),L=(0,i.useMemo)(()=>s&&({relationships:"What would you like to share about your relationships or connections with others?","work-school":"What's on your mind about work, school, or your sense of purpose?","self-care":"How are you taking care of yourself? What challenges are you facing?","loss-grief":"What would help you process what you're experiencing?","anxiety-stress":"What's weighing on you right now? You're not alone in this.",general:C.participant.messagePlaceholder})[s]||C.participant.messagePlaceholder,[s]),I=()=>{let e=l.trim();e&&(o({text:e,urgent:c,requestFacilitator:p}),q(s),v(!0),setTimeout(()=>{v(!1)},1e4),d(""),u(!1),g(!1))};return(0,r.jsxs)("div",{className:"mt-6 flex w-full max-w-6xl flex-col gap-6",role:"region","aria-label":"Participant view",id:"participant-panel",children:[(0,r.jsx)("section",{className:"rounded-3xl bg-card/90 p-6 shadow-xl shadow-primary/10",children:(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:C.participant.welcomeTitle}),(0,r.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-primary/10 px-4 py-1 text-sm font-semibold text-primary border border-primary/20",children:[(0,r.jsx)("span",{className:"text-xs uppercase tracking-wide text-primary/70",children:"Current room"}),n?n.name:"Not joined yet"]})]}),(0,r.jsx)("p",{className:"text-sm leading-relaxed text-muted-foreground",children:C.participant.welcomeDescription})]})}),(0,r.jsxs)("section",{className:"rounded-3xl bg-card/90 p-6 shadow-xl shadow-primary/10",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:C.participant.messagePromptTitle}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:C.participant.messagePromptDescription})]}),(0,r.jsx)("button",{type:"button",className:"text-sm font-semibold text-primary transition hover:text-primary-light",onClick:()=>a(null),"aria-label":"Clear topic selection",children:"Clear selection"})]}),(0,r.jsx)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 md:grid-cols-3",children:k.map(e=>{let t=s===e.id;return(0,r.jsxs)("button",{type:"button","aria-pressed":t,className:"flex items-center gap-3 rounded-2xl border px-4 py-3 text-left transition ".concat(t?"border-primary bg-primary/10 text-primary shadow-lg shadow-primary/20":"border-border text-muted-foreground hover:border-primary/50 hover:bg-primary/5 hover:text-primary"),onClick:()=>a(t?null:e.id),children:[(0,r.jsx)("span",{className:"text-xl","aria-hidden":"true",children:e.icon}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:e.label})]},e.id)})})]}),A.length>0&&(0,r.jsx)("section",{className:"rounded-3xl bg-gradient-to-br from-primary/10 via-primary/5 to-transparent p-6 shadow-xl shadow-primary/20 border-2 border-primary/30",children:(0,r.jsx)(y,{prompts:A,title:"Before you share, take a moment to reflect",description:"These questions can help you explore your thoughts more deeply.",onDismiss:()=>b(!1),dismissible:!0,className:"border-none bg-transparent shadow-none"})}),w&&D.length>0&&(0,r.jsx)("section",{className:"rounded-3xl bg-gradient-to-br from-secondary/10 via-secondary/5 to-transparent p-6 shadow-xl shadow-secondary/20 border-2 border-secondary/30 animate-in fade-in slide-in-from-top-4 duration-500",children:(0,r.jsx)(y,{prompts:D,title:"Thank you for sharing! \uD83C\uDF1F",description:"As you reflect on what you shared, consider these questions for your journey forward.",onDismiss:()=>v(!1),dismissible:!0,className:"border-none bg-transparent shadow-none"})}),(0,r.jsxs)("section",{className:"rounded-3xl bg-card/90 p-6 shadow-xl shadow-primary/10",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Share your message"}),(0,r.jsxs)("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] ".concat(R?"text-accent":"text-muted-foreground"),children:[l.length," / ",M]})]}),(0,r.jsx)("textarea",{value:l,onChange:e=>d(e.target.value.slice(0,M)),onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey&&(e.preventDefault(),I())},placeholder:L,className:"mt-4 w-full rounded-2xl border border-input bg-card p-4 text-sm leading-relaxed text-foreground shadow-inner focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",rows:4,"aria-label":"Message textarea"}),(0,r.jsxs)("div",{className:"mt-4 flex flex-col gap-3 text-sm text-muted-foreground sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:c,onChange:e=>u(e.target.checked),className:"h-5 w-5 rounded border-border text-primary focus:ring-primary"}),C.participant.urgentLabel]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:p,onChange:e=>g(e.target.checked),className:"h-5 w-5 rounded border-border text-primary focus:ring-primary"}),C.participant.requestFacilitatorLabel]})]}),(0,r.jsx)(x,{onClick:I,disabled:!l.trim(),"aria-label":"Send message anonymously",children:C.participant.sendButton})]})]}),(0,r.jsxs)("section",{className:"rounded-3xl bg-card/90 p-6 shadow-xl shadow-primary/10",children:[(0,r.jsx)("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:C.participant.communityMessagesTitle}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:C.participant.communityMessagesDescription})]})}),(0,r.jsx)("div",{className:"mt-5 flex flex-col gap-4",children:W.map(e=>(0,r.jsxs)("article",{className:"rounded-2xl border border-border bg-card p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[(0,r.jsx)("span",{className:"font-semibold text-foreground",children:e.author}),(0,r.jsx)("span",{"aria-hidden":"true",children:"•"}),(0,r.jsx)("span",{children:m(e.timestamp)}),(0,r.jsx)("span",{"aria-hidden":"true",children:"•"}),(0,r.jsx)("span",{className:"capitalize",children:e.topic}),(0,r.jsx)(h,{risk:e.risk})]}),(0,r.jsx)("p",{className:"mt-3 text-sm leading-relaxed text-foreground",children:e.text})]},e.id))})]}),(0,r.jsxs)("section",{className:"rounded-3xl bg-card/90 p-6 shadow-xl shadow-primary/10",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:C.participant.resourcesTitle}),(0,r.jsx)("div",{className:"mt-4 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:N.map(e=>(0,r.jsxs)("div",{className:"rounded-2xl border border-primary/20 bg-primary/5 p-4 shadow-sm",children:[(0,r.jsx)("span",{className:"text-2xl","aria-hidden":"true",children:e.icon}),(0,r.jsx)("p",{className:"mt-3 text-sm font-semibold text-primary",children:e.title}),(0,r.jsx)("p",{className:"mt-1 text-xs text-primary/80",children:e.description})]},e.id))})]})]})}let{P$:q}=n;function W(e){let{messages:t,onApprove:s,onMarkReviewed:a,onRemoveFromQueue:o}=e,[n,l]=(0,i.useState)("all"),[d,c]=(0,i.useState)(null),u=(0,i.useMemo)(()=>t.filter(e=>e.queued),[t]),p=(0,i.useMemo)(()=>{let e=t.length,s=u.length;return{totalMessages:e,queuedCount:s,highRiskCount:t.filter(e=>"high"===e.risk).length,reviewedCount:t.filter(e=>e.reviewed).length,avgResponse:s?"".concat(Math.max(1,Math.round(2.3*s)),"m"):"2m"}},[t,u.length]),g=(0,i.useMemo)(()=>"all"===n?t:t.filter(e=>e.risk===n),[t,n]);return(0,r.jsxs)("div",{className:"mt-6 flex w-full max-w-6xl flex-col gap-6",role:"region","aria-label":"Facilitator view",id:"facilitator-panel",children:[(0,r.jsxs)("section",{className:"rounded-3xl bg-card/95 p-6 shadow-xl shadow-primary/10",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:q.facilitator.statsTitle}),(0,r.jsxs)("div",{className:"mt-4 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(M,{label:q.facilitator.statLabels.totalMessages,value:p.totalMessages.toString(),accent:"bg-primary/10 text-primary border-primary/20"}),(0,r.jsx)(M,{label:q.facilitator.statLabels.inQueue,value:p.queuedCount.toString(),accent:"bg-accent/10 text-accent border-accent/20"}),(0,r.jsx)(M,{label:q.facilitator.statLabels.highPriority,value:p.highRiskCount.toString(),accent:"bg-destructive/10 text-destructive border-destructive/20"}),(0,r.jsx)(M,{label:q.facilitator.statLabels.reviewedToday,value:p.reviewedCount.toString(),accent:"bg-secondary/10 text-secondary border-secondary/20"})]})]}),(0,r.jsxs)("section",{className:"rounded-3xl bg-card/95 p-6 shadow-xl shadow-primary/10",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:q.facilitator.queueTitle}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:q.facilitator.queueDescription})]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Avg response: ",p.avgResponse]})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-3",children:[0===u.length&&(0,r.jsx)("p",{className:"rounded-2xl border border-border bg-muted p-6 text-sm text-muted-foreground",children:q.facilitator.queueEmptyMessage}),u.map(e=>{let t=function(e,t,s){let r=e.toLowerCase();return"high"===s?v["high-risk"]:r.includes("fail")||r.includes("inadequate")||r.includes("not good enough")?"work-school"===t?v["inferiority-work"]:v["self-criticism"]:r.includes("alone")||r.includes("lonely")||r.includes("isolated")?v["isolation-friendship"]:r.includes("meaning")||r.includes("purpose")||r.includes("why")?v["meaning-crisis"]:"relationships"===t||r.includes("relationship")||r.includes("partner")?v["relationship-strain"]:v["overwhelm-general"]}(e.text,e.topic,e.risk),i=d===e.id;return(0,r.jsxs)("article",{className:"rounded-2xl border border-accent/30 bg-card p-5 shadow-md",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs font-semibold uppercase tracking-[0.3em]",children:[(0,r.jsx)(h,{risk:e.risk}),(0,r.jsx)("span",{className:"text-muted-foreground",children:m(e.timestamp)}),(0,r.jsxs)("span",{className:"text-muted-foreground capitalize",children:["• ",e.topic]})]}),(0,r.jsx)("p",{className:"mt-3 text-sm leading-relaxed text-foreground",children:e.text}),(0,r.jsxs)("div",{className:"mt-4 rounded-xl border border-primary/20 bg-primary/5 p-4",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>c(i?null:e.id),className:"flex w-full items-center justify-between text-left","aria-expanded":i,"aria-controls":"guidance-".concat(e.id),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-base","aria-hidden":"true",children:"\uD83D\uDCA1"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-primary",children:"Adlerian Response Guidance"})]}),(0,r.jsx)("svg",{className:"h-5 w-5 text-primary transition-transform ".concat(i?"rotate-180":""),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),i&&(0,r.jsxs)("div",{id:"guidance-".concat(e.id),className:"mt-4 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary/70",children:"Theme Identified"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-primary",children:t.theme})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary/70",children:"Therapeutic Focus"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-primary",children:t.focus})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary/70",children:"Suggested Approach"}),(0,r.jsx)("ul",{className:"mt-2 space-y-1",children:t.suggestedApproach.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-start gap-2 text-sm text-primary",children:[(0,r.jsx)("span",{className:"text-primary/60",children:"•"}),(0,r.jsx)("span",{className:"flex-1",children:e})]},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary/70",children:"Encouragement Template"}),(0,r.jsxs)("p",{className:"mt-1 rounded-lg bg-primary/10 p-3 text-sm italic text-primary",children:["“",t.encouragementTemplate,"”"]})]})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[(0,r.jsx)(x,{variant:"secondary",size:"sm",onClick:()=>s(e.id),"aria-label":"Approve message ".concat(e.id," for feed"),children:q.facilitator.approveButton}),(0,r.jsx)(x,{variant:"outline",size:"sm",onClick:()=>a(e.id),"aria-label":"Mark message ".concat(e.id," as reviewed"),children:q.facilitator.markReviewedButton}),(0,r.jsx)(x,{variant:"destructive",size:"sm",onClick:()=>o(e.id),"aria-label":"Remove message ".concat(e.id," from queue"),children:q.facilitator.removeFromQueueButton})]})]},e.id)})]})]}),(0,r.jsxs)("section",{className:"rounded-3xl bg-card/95 p-6 shadow-xl shadow-primary/10",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:q.facilitator.feedTitle}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:q.facilitator.feedDescription})]}),(0,r.jsx)("div",{className:"flex items-center gap-2 rounded-full bg-muted p-1 text-xs font-semibold text-muted-foreground",role:"group","aria-label":"Risk filter",children:["all","high","medium","low"].map(e=>(0,r.jsx)("button",{type:"button","aria-pressed":n===e,className:"rounded-full px-4 py-1 capitalize transition ".concat(n===e?"bg-primary text-primary-foreground shadow-md shadow-primary/30":"hover:bg-card"),onClick:()=>l(e),children:e},e))})]}),(0,r.jsx)("div",{className:"mt-4 space-y-3",children:g.map(e=>(0,r.jsxs)("article",{className:"rounded-2xl border border-border bg-card p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs uppercase tracking-[0.3em] text-muted-foreground",children:[(0,r.jsx)("span",{className:"font-semibold text-foreground",children:e.author}),(0,r.jsx)("span",{"aria-hidden":"true",children:"-"}),(0,r.jsx)("span",{children:m(e.timestamp)}),(0,r.jsx)("span",{"aria-hidden":"true",children:"-"}),(0,r.jsx)("span",{className:"capitalize",children:e.topic}),(0,r.jsx)(h,{risk:e.risk})]}),(0,r.jsx)("p",{className:"mt-3 text-sm leading-relaxed text-foreground",children:e.text})]},e.id))})]})]})}let M=(0,i.memo)(function(e){let{label:t,value:s,accent:i}=e;return(0,r.jsxs)("div",{className:"rounded-2xl border border-border bg-card p-5 shadow-sm",children:[(0,r.jsx)("div",{className:"inline-flex rounded-xl border px-3 py-1 text-xs font-semibold uppercase tracking-wide ".concat(i),children:t}),(0,r.jsx)("div",{className:"mt-4 text-3xl font-semibold text-foreground",children:s})]})}),R={success:"border-secondary/30 bg-secondary/10 text-secondary",error:"border-destructive/30 bg-destructive/10 text-destructive",info:"border-primary/30 bg-primary/10 text-primary"};function A(e){let{toasts:t,onDismiss:s}=e;return 0===t.length?null:(0,r.jsx)("div",{className:"fixed bottom-6 right-6 z-[60] flex w-full max-w-sm flex-col gap-3",role:"region","aria-label":"Notifications",children:t.map(e=>(0,r.jsxs)("div",{role:"alert","aria-live":"polite",className:"flex items-start gap-3 rounded-2xl border px-4 py-3 shadow-lg shadow-black/10 transition animate-in slide-in-from-right ".concat(R[e.type]),children:[(0,r.jsx)("div",{className:"flex-1 text-sm font-medium",children:e.message}),(0,r.jsx)("button",{type:"button","aria-label":"Dismiss notification",className:"text-lg font-bold opacity-60 hover:opacity-100 transition",onClick:()=>s(e.id),children:"\xd7"})]},e.id))})}let D="w-full max-w-lg rounded-3xl bg-card p-8 shadow-2xl shadow-primary/20 flex flex-col gap-6 max-h-[82vh] overflow-hidden";function L(e){if("complete"===e.step)return null;let{step:t,username:s,password:i,profile:a,anonymousPreview:o,roomGroups:n,onUsernameChange:l,onPasswordChange:d,onSubmitCredentials:c,onAcceptTerms:u,onRejectTerms:m,onSelectProfile:p,onBackTo:h,onContinueProfile:g,onSelectRoom:f}=e;return(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-foreground/60 backdrop-blur-sm p-6",children:["signIn"===t&&(0,r.jsxs)("div",{className:D,role:"dialog","aria-modal":"true","aria-labelledby":"sign-in-title",children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-primary",children:"Step 1"}),(0,r.jsx)("h2",{id:"sign-in-title",className:"mt-2 text-2xl font-bold text-foreground",children:"Sign in to explore SilentSpeak"}),(0,r.jsx)("p",{className:"mt-3 text-sm text-muted-foreground",children:"Use any username and password to continue. Nothing is stored outside your browser in this demo."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-semibold text-foreground",htmlFor:"demo-username",children:"Username"}),(0,r.jsx)("input",{id:"demo-username",value:s,onChange:e=>l(e.target.value),placeholder:"e.g. facilitator.demo",autoComplete:"off",className:"rounded-xl border border-input bg-card px-4 py-3 text-base text-foreground shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-semibold text-foreground",htmlFor:"demo-password",children:"Password"}),(0,r.jsx)("input",{id:"demo-password",type:"password",value:i,onChange:e=>d(e.target.value),placeholder:"Enter any password",className:"rounded-xl border border-input bg-card px-4 py-3 text-base text-foreground shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3",children:[(0,r.jsx)(x,{variant:"outline",size:"lg",className:"flex-1",onClick:()=>c("signup"),children:"Sign up"}),(0,r.jsx)(x,{variant:"primary",size:"lg",className:"flex-1",onClick:()=>c("login"),children:"Log in"})]})]}),"terms"===t&&(0,r.jsxs)("div",{className:D,role:"dialog","aria-modal":"true","aria-labelledby":"terms-title",children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-primary",children:"Step 2"}),(0,r.jsx)("h2",{id:"terms-title",className:"mt-2 text-2xl font-bold text-foreground",children:"Community Guidelines"}),(0,r.jsx)("p",{className:"mt-3 text-sm text-muted-foreground",children:"A few commitments help everyone feel safe."})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto rounded-2xl bg-muted p-5 text-sm text-muted-foreground shadow-inner",children:[(0,r.jsx)("p",{children:"By continuing, you agree to:"}),(0,r.jsxs)("ul",{className:"mt-3 list-disc space-y-2 pl-5",children:[(0,r.jsx)("li",{children:"Keep conversations respectful, supportive, and anonymous."}),(0,r.jsx)("li",{children:"Flag posts that suggest immediate harm so facilitators can act quickly."}),(0,r.jsx)("li",{children:"Understand facilitators may review posts to keep the space safe."}),(0,r.jsx)("li",{children:"Use SilentSpeak for peer support, not urgent crisis intervention."}),(0,r.jsx)("li",{children:"Acknowledge crisis protocols could notify emergency contacts if risk is detected."})]}),(0,r.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:"SilentSpeak is not a replacement for emergency services. If you are in crisis, contact your local emergency number or dial 988 (US) immediately."})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3",children:[(0,r.jsx)(x,{variant:"ghost",size:"lg",className:"flex-1",onClick:m,children:"Reject"}),(0,r.jsx)(x,{variant:"primary",size:"lg",className:"flex-1",onClick:u,children:"I accept"})]})]}),"profile"===t&&(0,r.jsxs)("div",{className:D,role:"dialog","aria-modal":"true","aria-labelledby":"profile-title",children:[(0,r.jsxs)("header",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-primary",children:"Step 3"}),(0,r.jsx)("h2",{id:"profile-title",className:"mt-2 text-2xl font-bold text-foreground",children:"Choose how you show up"}),(0,r.jsx)("p",{className:"mt-3 text-sm text-muted-foreground",children:"Facilitators often use the custom profile during live demos. Participants usually remain anonymous."})]}),(0,r.jsx)("button",{type:"button",className:"text-sm font-semibold text-primary transition hover:text-primary-light",onClick:()=>h("terms"),children:"Back"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>p("custom"),className:"w-full rounded-2xl border px-5 py-4 text-left transition ".concat("custom"===a?"border-primary bg-primary/10 shadow-lg":"border-border bg-card hover:border-primary/50 hover:bg-primary/5"),children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-foreground",children:"Guided Support Coach"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Predefined facilitator voice for walkthroughs featuring grounded, empathetic responses."}),(0,r.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:'Bio: "Here to model supportive responses for the group."'})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>p("anonymous"),className:"w-full rounded-2xl border px-5 py-4 text-left transition ".concat("anonymous"===a?"border-primary bg-primary/10 shadow-lg":"border-border bg-card hover:border-primary/50 hover:bg-primary/5"),children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-foreground",children:"Anonymous Ally"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Your anonymous identity allows you to share authentically while contributing to our community. By participating, you're not just receiving support—you're offering it to others through shared experience."}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-muted-foreground",children:["Alias preview: ",o]})]})]}),(0,r.jsx)(x,{variant:"primary",size:"lg",disabled:!a,onClick:g,children:"Continue"})]}),"rooms"===t&&(0,r.jsxs)("div",{className:D,role:"dialog","aria-modal":"true","aria-labelledby":"rooms-title",children:[(0,r.jsxs)("header",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-primary",children:"Step 4"}),(0,r.jsx)("h2",{id:"rooms-title",className:"mt-2 text-2xl font-bold text-foreground",children:"Pick a session room"}),(0,r.jsx)("p",{className:"mt-3 text-sm text-muted-foreground",children:"Rooms are grouped by date so you can join the right conversation during the walkthrough."})]}),(0,r.jsx)("button",{type:"button",className:"text-sm font-semibold text-primary transition hover:text-primary-light",onClick:()=>h("profile"),children:"Back"})]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-primary/20 bg-primary/5 p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-base","aria-hidden":"true",children:"\uD83D\uDCAD"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-primary",children:"Reflect before you join"})]}),(0,r.jsxs)("div",{className:"mt-3 space-y-2 text-sm text-primary/90",children:[(0,r.jsx)("p",{children:"• What do you hope to gain from this community?"}),(0,r.jsx)("p",{children:"• How might sharing your experience help others who are struggling?"})]})]}),(0,r.jsx)("div",{className:"flex-1 space-y-5 overflow-y-auto pr-1",children:n.map(e=>(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:e.label}),(0,r.jsx)("div",{className:"space-y-3",children:e.rooms.map(e=>(0,r.jsx)("div",{className:"rounded-2xl border border-border bg-card p-4 shadow-sm",children:(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-base font-semibold text-foreground",children:e.name}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-muted-foreground",children:[e.time," • ",e.focus," • ",e.availability]})]}),(0,r.jsx)(x,{variant:"primary",size:"md",onClick:()=>f(e),children:"Join room"})]})},e.id))})]},e.label))})]})]})}let I=n.LK,{ui:F,P$:P}=n;function B(){let[e,t]=(0,i.useState)([]),[s,l]=(0,i.useState)(null),[d,m]=(0,i.useState)("participant"),[p,h]=(0,i.useState)(F.systemStatus.defaultUserCount),[g]=(0,i.useState)(F.systemStatus.defaultFacilitatorCount),[f,x]=(0,i.useState)(null),[y,b]=(0,i.useState)("signIn"),[w,v]=(0,i.useState)(null),[j,k]=(0,i.useState)(""),[N,T]=(0,i.useState)(""),[C,q]=(0,i.useState)(c()),[M,R]=(0,i.useState)([]),D=(0,i.useRef)(1);(0,i.useEffect)(()=>{let e=n.yv.map((e,t)=>{let s=new Date(Date.now()-60*e.minutesAgo*1e3);return function(e,t){var s,r,i,a,o,n,l,d;let m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=null!=(s=m.timestamp)?s:new Date,h=null!=(r=m.risk)?r:u(t);return{id:e,text:t,author:null!=(i=m.author)?i:c(),timestamp:p,topic:null!=(a=m.topic)?a:"general",risk:h,urgent:null!=(o=m.urgent)&&o,queued:null!=(n=m.queued)?n:"high"===h,reviewed:null!=(l=m.reviewed)?l:"low"===h,approved:null==(d=m.approved)||d}}(t+1,e.text,{author:e.author,timestamp:s,topic:e.topic,risk:u(e.text),urgent:e.urgent,queued:e.queued,reviewed:e.reviewed,approved:e.approved})});D.current=e.length+1,t(e),h(Math.floor(10*Math.random())+5)},[]),(0,i.useEffect)(()=>{"profile"===y&&q(c())},[y]),(0,i.useEffect)(()=>{let e=window.setInterval(()=>{h(e=>Math.max(1,e+Math.floor(3*Math.random())-1))},F.systemStatus.userCountFluctuationInterval);return()=>window.clearInterval(e)},[]),(0,i.useEffect)(()=>{if("undefined"!=typeof document)return"complete"!==y?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}},[y]);let B=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2?arguments[2]:void 0,r=crypto.randomUUID(),i=null!=s?s:F.toastDurations[t];R(s=>[...s,{id:r,message:e,type:t}]),window.setTimeout(()=>{R(e=>e.filter(e=>e.id!==r))},i)},[]),E=(0,i.useMemo)(()=>I.map(e=>({label:e.label,rooms:e.rooms.map(t=>({...t,dateLabel:e.label}))})),[]),H=(0,i.useCallback)(e=>{let{text:r,urgent:i,requestFacilitator:a}=e,o=u(r),n={id:D.current++,text:r,author:"custom"===w?"Guided Support Coach":c(),timestamp:new Date,topic:null!=s?s:"general",risk:o,urgent:i,queued:i||a||"high"===o,reviewed:!1,approved:"low"===o};t(e=>[n,...e]),B(P.toasts.messageSent,"success"),n.queued&&B(P.toasts.facilitatorNotified,"info",F.toastDurations.info)},[B,w,s]),z=(0,i.useCallback)(e=>{t(t=>t.map(t=>t.id===e?{...t,approved:!0,queued:!1,reviewed:!0}:t)),B(P.toasts.messageApproved,"success")},[B]),G=(0,i.useCallback)(e=>{t(t=>t.map(t=>t.id===e?{...t,reviewed:!0,queued:!1}:t)),B(P.toasts.messageReviewed,"info")},[B]),U=(0,i.useCallback)(e=>{t(t=>t.map(t=>t.id===e?{...t,queued:!1}:t)),B(P.toasts.messageRemoved,"info")},[B]),Y=(0,i.useCallback)(e=>{if(!j.trim()||!N.trim())return void B(P.toasts.credentialsError,"error");B(P.toasts["login"===e?"loginSuccess":"signupSuccess"].replace("{username}",j),"success"),b("terms")},[B,N,j]),K=(0,i.useCallback)(()=>{b("profile"),B(P.toasts.termsAccepted,"success")},[B]),Q=(0,i.useCallback)(()=>{b("signIn"),B(P.toasts.termsRejected,"info")},[B]),O=(0,i.useCallback)(e=>{v(e),B(P.toasts.profileSelected.replace("{profile}","custom"===e?"Guided Support Coach":"Anonymous Ally"),"info")},[B]),_=(0,i.useCallback)(()=>{if(!w)return void B(P.toasts.profileRequired,"error");b("rooms")},[B,w]),J=(0,i.useCallback)(e=>{x(e),b("complete"),B(P.toasts.roomJoined.replace("{roomName}",e.name),"success")},[B]),$=(0,i.useCallback)(e=>{R(t=>t.filter(t=>t.id!==e))},[]);return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted to-background pb-20",children:[(0,r.jsx)(a,{userCount:p,facilitatorCount:g,currentRoom:f}),(0,r.jsxs)("main",{className:"mx-auto flex max-w-6xl flex-col items-center gap-6 px-6 pb-24 pt-10",children:[(0,r.jsx)(o,{activeTab:d,onChange:m}),"participant"===d?(0,r.jsx)(S,{messages:e.filter(e=>e.approved),selectedTopic:s,onSelectTopic:l,onSendMessage:H,room:f}):(0,r.jsx)(W,{messages:e,onApprove:z,onMarkReviewed:G,onRemoveFromQueue:U})]}),(0,r.jsx)(L,{step:y,username:j,password:N,profile:w,anonymousPreview:C,roomGroups:E,onUsernameChange:k,onPasswordChange:T,onSubmitCredentials:Y,onAcceptTerms:K,onRejectTerms:Q,onSelectProfile:O,onBackTo:e=>b(e),onContinueProfile:_,onSelectRoom:J}),(0,r.jsx)(A,{toasts:M,onDismiss:$})]})}},7438:(e,t,s)=>{Promise.resolve().then(s.bind(s,5519))}},e=>{e.O(0,[441,255,358],()=>e(e.s=7438)),_N_E=e.O()}]);